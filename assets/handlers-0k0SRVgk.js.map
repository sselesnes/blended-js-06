{"version":3,"file":"handlers-0k0SRVgk.js","sources":["../../src/js/storage.js","../../src/js/refs.js","../../src/js/render-function.js","../../src/js/helpers.js","../../src/js/products-api.js","../../src/js/modal.js","../../src/js/handlers.js"],"sourcesContent":["//Робота з localStorage\n\n// ignoring keys that do not belong to our application data (without prefix)\n\nexport const LS = {\n  prefix: 'b06-',\n\n  get: function (productId) {\n    return JSON.parse(localStorage.getItem(this.prefix + productId));\n  },\n\n  remove: function (productId) {\n    localStorage.removeItem(this.prefix + productId);\n  },\n\n  add: function (productId, location, qty) {\n    let wish = location === 'wish' ? 1 : 0;\n    const exists = JSON.parse(this.get(this.prefix + productId));\n    if (exists) {\n      qty += exists.qty;\n      wish |= exists.wish;\n    }\n    localStorage.setItem(\n      this.prefix + productId,\n      JSON.stringify({ qty: qty, wish: wish, timestamp: Date.now() })\n    );\n  },\n\n  getKeys: function () {\n    return Object.entries(localStorage)\n      .filter(([key]) => key.startsWith(this.prefix))\n      .map(([key, value]) => {\n        const productId = Number(key.substring(this.prefix.length));\n        const { wish, qty, timestamp } = JSON.parse(value);\n        return { productId, qty, wish, timestamp }; //\n      })\n      .sort((a, b) => a.timestamp - b.timestamp); //\n  },\n};\n","//Обʼєкт з посиланнями на ДОМ елементи\n\nexport const refs = {\n  categories: document.querySelector('.categories'),\n  products: document.querySelector('.products'),\n  loadMore: document.querySelector('.load-more'),\n  searchForm: document.querySelector('.search-form'),\n  notFound: document.querySelector('.not-found'),\n  modalProduct: document.querySelector('.modal-product'),\n  modal: document.querySelector('.modal'),\n  body: document.querySelector('body'),\n  orderSummary: document.querySelector('.cart-summary__inner'),\n};\n","//Функцію для створення, рендеру або видалення розмітки\n\nimport { refs } from './refs';\nimport { LS } from './storage';\nimport { productsPerPage } from './helpers';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function clearProducts(category, categorySelected) {\n  refs.categories.querySelectorAll('.categories__btn').forEach(button => {\n    const buttonText = button.textContent;\n    if (buttonText === category) {\n      button.classList.remove('categories__btn--active');\n    }\n    if (buttonText === categorySelected) {\n      button.classList.add('categories__btn--active');\n    }\n  });\n  refs.loadMore.style.display = 'none';\n  refs.products.innerHTML = '';\n}\n\nexport function renderCategories(data) {\n  refs.categories.insertAdjacentHTML('beforeend', markupCategory(data));\n  clearProducts('all', 'all');\n}\n\nexport function renderProducts(data, page, searchQuery, origin) {\n  // loadMore behavior\n  // no loadmore in the wishlist or cart\n  refs.loadMore && (refs.loadMore.style.display = 'none');\n  refs.products.insertAdjacentHTML(\n    'beforeend',\n    markupProducts(data.products, origin)\n  );\n\n  if (!data.total) refs.notFound.classList.add('not-found--visible');\n  else {\n    refs.notFound.classList.remove('not-found--visible');\n  }\n\n  // pagination in search requests is not supported by DummyJSON\n  if (!searchQuery & (data.total > productsPerPage * page)) {\n    // no loadmore in the wishlist or cart\n    refs.loadMore && (refs.loadMore.style.display = 'flex');\n  } else {\n    if (page !== 1) {\n      iziToast.info({\n        message: `You've reached the end of search results.`,\n        position: 'bottomCenter',\n        timeout: 2000,\n      });\n    }\n  }\n}\n\nexport function renderCard(data) {\n  refs.modalProduct.innerHTML = markupCard(data);\n}\n\nfunction markupCategory(data) {\n  return data\n    .map(\n      category =>\n        `<li class=\"categories__item\"><button class=\"categories__btn\" type=\"button\">${category}</button>\n        </li>`\n    )\n    .join('');\n}\n\nfunction markupProducts(data, origin) {\n  return data\n    .map(\n      product =>\n        `<li class=\"products__item\" data-id='${product.id}' data-origin='${origin}'>\n            <img class=\"products__image\" src=${product.thumbnail} alt=${product.description}/>\n            <p class=\"products__title\">${product.title}</p>\n            <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand: ${product.brand}</span></p>\n            <p class=\"products__category\">Category: ${product.category}</p>\n            <p class=\"products__price\">Price: $${product.price}</p>\n        </li>`\n    )\n    .join('');\n}\n\nfunction markupCard(data) {\n  return `<img class=\"modal-product__img\" src=\"${data.thumbnail}\"\n  alt=\"${data.description}\"/>    \n    <div class=\"modal-product__content\"><div><p class=\"modal-product__title\">\n        ${data.title}</p><ul class=\"modal-product__tags\">${data.tags.join(\n    ' '\n  )}</ul>\n        <p class=\"modal-product__description\">${data.description}</p></div>\n        <div><p class=\"modal-product__shipping-information\">${\n          data.shippingInformation\n        }</p>\n        <p class=\"modal-product__return-policy\">${\n          data.returnPolicy\n        }</p></div></div>\n        <div class=\"modal-product__actions\">\n        <button class=\"modal-product__btn modal-product__btn--wishlist\"\n        type=\"button\">Add to Wishlist</button>\n    <button class=\"modal-product__btn modal-product__btn--cart\" type=\"button\">\n        Add to Cart</button></div>\n    <div class=\"modal-product__price_buy\"><p class=\"modal-product__price\">Price: $${\n      data.price\n    }</p><button class=\"modal-product__btn modal-product__buy-btn\" type=\"button\">Buy It Now</button>\n        </div>\n        `;\n  // Зайве - Shipping: Return Policy:\n}\n\nexport function updateHeader() {\n  let cart = 0;\n  let wish = 0;\n  LS.getKeys().forEach(item => {\n    item.productId && item.qty && cart++;\n    item.wish && wish++;\n  });\n  refs.body.querySelector('[data-cart-count]').textContent = cart;\n  refs.body.querySelector('[data-wishlist-count]').textContent = wish;\n}\n\nexport function updateOrderSummary(items, total) {\n  refs.orderSummary.querySelector('[data-count]').textContent = items;\n  refs.orderSummary.querySelector('[data-price]').textContent = `$${total}`;\n}\n\nexport function clearWishCart() {\n  updateHeader();\n  updateOrderSummary(0, 0);\n  refs.products.innerHTML = '';\n  refs.notFound.classList.add('not-found--visible');\n}\n","//Допоміжні функції\n// Functions from home.js moved to helpers.js due to a conflict with handlers.js during global initialization (сyclic dependencies)\n\nimport { getProducts } from './products-api';\nimport { renderProducts, clearProducts } from './render-function';\n// import { cartProcessingEnd } from '../cart';\n\nexport const productsPerPage = 12;\nexport let searchQuery = null;\nlet category = 'all';\nlet page = 1;\n\nexport function nextProductsPage() {\n  page++;\n  handleProducts();\n}\n\nexport async function handleProducts() {\n  const products = await getProducts(page, category, searchQuery);\n  if (products) {\n    renderProducts(products, page, searchQuery, 'home');\n    searchQuery = null;\n  }\n}\n\nexport function applyFilter(categorySelected, searchFormQuery) {\n  page = 1;\n  if (!searchFormQuery & (categorySelected == category)) {\n    return;\n  }\n  if (searchFormQuery) {\n    searchQuery = searchFormQuery;\n    categorySelected = 'empty';\n  }\n  clearProducts(category, categorySelected);\n  category = categorySelected;\n  handleProducts();\n}\n","// Функції для роботи з бекендом\n\nimport axios from 'axios';\nimport { productsPerPage } from './helpers';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport async function getCategories(category) {\n  try {\n    const { data } = await axios.get(\n      'https://dummyjson.com/products/category-list'\n    );\n    return data;\n  } catch (error) {\n    uiMessage(`Categories fetch: ${error}`);\n    return null;\n  }\n}\n\nexport async function getProducts(page, category, searchQuery) {\n  const skip = (page - 1) * productsPerPage;\n  let props = `?limit=${productsPerPage}&skip=${skip}`;\n  if (category !== 'all') {\n    props = `/category/${category}?limit=${productsPerPage}&skip=${skip}`;\n  }\n\n  // dummyjson doesn`t support search query pagination\n  if (searchQuery) {\n    props = `/search?q=${searchQuery}`;\n  }\n  try {\n    const { data } = await axios.get(`https://dummyjson.com/products${props}`);\n    return data;\n  } catch (error) {\n    uiMessage(`Products fetch: ${error}`);\n    return null;\n  }\n}\n\nexport async function getProduct(productId) {\n  try {\n    const { data } = await axios.get(\n      `https://dummyjson.com/products/${productId}`\n    );\n    return data;\n  } catch (error) {\n    uiMessage(`Product ID ${productId} fetch: ${error}`);\n    return null;\n  }\n}\n\nfunction uiMessage(error) {\n  iziToast.error({\n    message: error,\n    position: 'bottomCenter',\n    timeout: 2000,\n  });\n}\n","//Описана робота модалки - відкриття закриття і все що з модалкою повʼязано\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { refs } from './refs';\nimport { LS } from './storage';\nimport { getProduct } from './products-api';\nimport { renderCard, updateHeader } from './render-function';\n\nlet modalClickListener;\nconst wishlistBtn = 'modal-product__btn--wishlist';\nconst cartBtn = 'modal-product__btn--cart';\n\nexport async function modalOpen(productId) {\n  const product = await getProduct(productId);\n  if (product) {\n    // dummyjson images Cache-control: public, max-age=0\n    renderCard(product);\n    actionBtnsText(productId);\n    refs.modal.classList.add('modal--is-open');\n    refs.body.addEventListener('click', modalOutside);\n    modalClickListener = modalClick.bind(null, productId);\n    refs.modal.addEventListener('click', modalClickListener);\n  }\n}\n\nfunction modalClose() {\n  refs.modal.classList.remove('modal--is-open');\n  refs.modal.removeEventListener('click', modalClickListener);\n  refs.body.removeEventListener('click', modalOutside);\n}\n\nfunction modalOutside(event) {\n  if (event.target === refs.modal) {\n    modalClose();\n  }\n}\n\nfunction modalClick(productId, event) {\n  if (event.target.classList.contains('modal__close-btn')) {\n    modalClose();\n  }\n\n  const productStorageInfo = LS.get(productId);\n  // don't change 'wish' when clicked `add to cart`\n  if (event.target.classList.contains(cartBtn)) {\n    if (productStorageInfo) {\n      if (!productStorageInfo.qty) {\n        LS.add(productId, productStorageInfo.wish ? 'wish' : 'cart', 1);\n      } else {\n        LS.add(productId, productStorageInfo.wish ? 'wish' : 'cart', 0);\n      }\n    } else {\n      LS.add(productId, 'cart', 1);\n    }\n    actionBtnsText(productId);\n  }\n\n  // don't change 'qty' when clicked `add to wishlist`\n  if (event.target.classList.contains(wishlistBtn)) {\n    if (productStorageInfo) {\n      if (!productStorageInfo.wish) {\n        LS.add(productId, 'wish', productStorageInfo.qty);\n      } else {\n        LS.add(productId, 'none', productStorageInfo.qty);\n      }\n    } else {\n      LS.add(productId, 'wish', 0);\n    }\n    actionBtnsText(productId);\n  }\n\n  if (event.target.classList.contains('modal-product__buy-btn')) {\n    buyItNowProcessing(productId);\n  }\n  updateHeader();\n}\n\nfunction actionBtnsText(productId) {\n  const productStorageInfo = LS.get(productId);\n  if (productStorageInfo) {\n    if (productStorageInfo.wish) {\n      refs.modal.querySelector(`.` + wishlistBtn).textContent =\n        'Remove from Wishlist';\n    } else {\n      refs.modal.querySelector(`.` + wishlistBtn).textContent =\n        'Add to Wishlist';\n    }\n    if (productStorageInfo.qty) {\n      refs.modal.querySelector(`.` + cartBtn).textContent = 'Remove from Cart';\n    } else {\n      refs.modal.querySelector(`.` + cartBtn).textContent = 'Add to Cart';\n    }\n  }\n}\n\nfunction buyItNowProcessing() {\n  iziToast.info({\n    message: `Successful purchase of product`,\n    position: 'bottomCenter',\n    timeout: 2000,\n  });\n}\n","// Функції, які передаються колбеками в addEventListners\n\nimport { LS } from './storage';\nimport { refs } from './refs';\nimport { modalOpen } from './modal';\nimport { nextProductsPage, applyFilter } from './helpers';\n\nexport const handlers = {\n  loadMore: function (event) {\n    if (event.target.classList.contains('load-more-btn')) {\n      nextProductsPage();\n    }\n  },\n  categoriesFilter: function (event) {\n    if (event.target.classList.value == 'categories__btn') {\n      applyFilter(event.target.textContent, null);\n    }\n  },\n  searchProduct: function (event) {\n    event.preventDefault();\n    const searchFormQuery = event.target.elements.searchValue.value;\n    event.target.elements.searchValue.value = '';\n\n    // if the search event does not come from home/index.html\n    const urlPath = urlHandler.get();\n    if (urlPath !== '/' && urlPath !== '/index.html') {\n      LS.add('search', 'none', searchFormQuery);\n      urlHandler.clear();\n    }\n    applyFilter(null, searchFormQuery);\n  },\n  searchClear: function (event) {\n    if (event.target.classList.value === 'search-form__btn-clear') {\n      refs.searchForm.elements.searchValue.value = '';\n    }\n  },\n  productCard: function (event) {\n    let targetElement = event.target;\n    if (targetElement.classList.value !== 'products') {\n      while (!targetElement.classList.contains('products__item')) {\n        targetElement = targetElement.parentElement;\n      }\n      modalOpen(targetElement.dataset.id);\n    }\n  },\n};\n\nexport const urlHandler = {\n  get: function () {\n    return window.location.pathname;\n  },\n  clear: function () {\n    let url = window.location.href;\n    window.location.href = url.slice(0, url.lastIndexOf('/') + 1);\n  },\n};\n"],"names":["LS","productId","location","qty","wish","exists","key","value","timestamp","a","b","refs","clearProducts","category","categorySelected","button","buttonText","renderCategories","data","markupCategory","renderProducts","page","searchQuery","origin","markupProducts","productsPerPage","iziToast","renderCard","markupCard","product","updateHeader","cart","item","updateOrderSummary","items","total","clearWishCart","nextProductsPage","handleProducts","products","getProducts","applyFilter","searchFormQuery","getCategories","axios","error","uiMessage","skip","props","getProduct","modalClickListener","wishlistBtn","cartBtn","modalOpen","actionBtnsText","modalOutside","modalClick","modalClose","event","productStorageInfo","buyItNowProcessing","handlers","urlPath","urlHandler","targetElement","url"],"mappings":"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"}