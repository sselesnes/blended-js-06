import{i as h,a as _}from"./vendor-4yCzdkXl.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const m of n.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();const a={prefix:"b06-",get:function(t){return JSON.parse(localStorage.getItem(this.prefix+t))},remove:function(t){localStorage.removeItem(this.prefix+t)},add:function(t,e,o){let i=e==="wish"?1:0;const s=JSON.parse(this.get(this.prefix+t));s&&(o+=s.qty,i|=s.wish),localStorage.setItem(this.prefix+t,JSON.stringify({qty:o,wish:i,timestamp:Date.now()}))},getKeys:function(){return Object.entries(localStorage).filter(([t])=>t.startsWith(this.prefix)).map(([t,e])=>{const o=Number(t.substring(this.prefix.length)),{wish:i,qty:s,timestamp:n}=JSON.parse(e);return{productId:o,qty:s,wish:i,timestamp:n}}).sort((t,e)=>t.timestamp-e.timestamp)}},r={categories:document.querySelector(".categories"),products:document.querySelector(".products"),loadMore:document.querySelector(".load-more"),searchForm:document.querySelector(".search-form"),notFound:document.querySelector(".not-found"),modalProduct:document.querySelector(".modal-product"),modal:document.querySelector(".modal"),body:document.querySelector("body"),orderSummary:document.querySelector(".cart-summary__inner")};function $(t,e){r.categories.querySelectorAll(".categories__btn").forEach(o=>{const i=o.textContent;i===t&&o.classList.remove("categories__btn--active"),i===e&&o.classList.add("categories__btn--active")}),r.loadMore.style.display="none",r.products.innerHTML=""}function B(t){r.categories.insertAdjacentHTML("beforeend",P(t)),$("all","all")}function q(t,e,o){r.loadmore&&(r.loadMore.style.display="none"),r.products.insertAdjacentHTML("beforeend",O(t.products)),t.total?r.notFound.classList.remove("not-found--visible"):r.notFound.classList.add("not-found--visible"),!o&t.total>c*e?r.loadmore&&(r.loadMore.style.display="flex"):e!==1&&h.info({message:"You've reached the end of search results.",position:"bottomCenter",timeout:2e3})}function x(t){r.modalProduct.innerHTML=M(t)}function P(t){return t.map(e=>`<li class="categories__item"><button class="categories__btn" type="button">${e}</button>
        </li>`).join("")}function O(t){return t.map(e=>`<li class="products__item" data-id="${e.id}">
            <img class="products__image" src=${e.thumbnail} alt=${e.description}/>
            <p class="products__title">${e.title}</p>
            <p class="products__brand"><span class="products__brand--bold">Brand: ${e.brand}</span></p>
            <p class="products__category">Category: ${e.category}</p>
            <p class="products__price">Price: $${e.price}</p>
        </li>`).join("")}function M(t){return`<img class="modal-product__img" src="${t.thumbnail}"
  alt="${t.description}"/>    
    <div class="modal-product__content"><div><p class="modal-product__title">
        ${t.title}</p><ul class="modal-product__tags">${t.tags.join(" ")}</ul>
        <p class="modal-product__description">${t.description}</p></div>
        <div><p class="modal-product__shipping-information">${t.shippingInformation}</p>
        <p class="modal-product__return-policy">${t.returnPolicy}</p></div></div>
        <div class="modal-product__actions">
        <button class="modal-product__btn modal-product__btn--wishlist"
        type="button">Add to Wishlist</button>
    <button class="modal-product__btn modal-product__btn--cart" type="button">
        Add to Cart</button></div>
    <div class="modal-product__price_buy"><p class="modal-product__price">Price: $${t.price}</p><button class="modal-product__btn modal-product__buy-btn" type="button">Buy It Now</button>
        </div>
        `}function N(){let t=0,e=0;a.getKeys().forEach(o=>{o.productId&&o.qty&&t++,o.wish&&e++}),r.body.querySelector("[data-cart-count]").textContent=t,r.body.querySelector("[data-wishlist-count]").textContent=e}function J(t,e){r.orderSummary.querySelector("[data-count]").textContent=t,r.orderSummary.querySelector("[data-price]").textContent=`$${e}`}const c=12;let l=null,u="all",d=1;function j(){d++,v()}async function v(){const t=await E(d,u,l);t&&(q(t,d,l),l=null)}function w(t,e){d=1,!(!e&t==u)&&(e&&(l=e,t="empty"),$(u,t),u=t,v())}async function W(t){try{const{data:e}=await _.get("https://dummyjson.com/products/category-list");return e}catch(e){return b(`Categories fetch: ${e}`),null}}async function E(t,e,o){const i=(t-1)*c;let s=`?limit=${c}&skip=${i}`;e!=="all"&&(s=`/category/${e}?limit=${c}&skip=${i}`),o&&(s=`/search?q=${o}`);try{const{data:n}=await _.get(`https://dummyjson.com/products${s}`);return n}catch(n){return b(`Products fetch: ${n}`),null}}async function A(t){try{const{data:e}=await _.get(`https://dummyjson.com/products/${t}`);return e}catch(e){return b(`Product ID ${t} fetch: ${e}`),null}}function b(t){h.error({message:t,position:"bottomCenter",timeout:2e3})}let p;const f="modal-product__btn--wishlist",y="modal-product__btn--cart";async function k(t){const e=await A(t);e&&(x(e),g(t),r.modal.classList.add("modal--is-open"),r.body.addEventListener("click",C),p=F.bind(null,t),r.modal.addEventListener("click",p))}function L(){r.modal.classList.remove("modal--is-open"),r.modal.removeEventListener("click",p),r.body.removeEventListener("click",C)}function C(t){t.target===r.modal&&L()}function F(t,e){e.target.classList.contains("modal__close-btn")&&L();const o=a.get(t);e.target.classList.contains(y)&&(o?o.qty?a.add(t,o.wish?"wish":"cart",0):a.add(t,o.wish?"wish":"cart",1):a.add(t,"cart",1),g(t)),e.target.classList.contains(f)&&(o?o.wish?a.add(t,"none",o.qty):a.add(t,"wish",o.qty):a.add(t,"wish",0),g(t)),e.target.classList.contains("modal-product__buy-btn")&&T(),N()}function g(t){const e=a.get(t);e&&(e.wish?r.modal.querySelector("."+f).textContent="Remove from Wishlist":r.modal.querySelector("."+f).textContent="Add to Wishlist",e.qty?r.modal.querySelector("."+y).textContent="Remove from Cart":r.modal.querySelector("."+y).textContent="Add to Cart")}function T(){h.info({message:"Successful purchase of product",position:"bottomCenter",timeout:2e3})}const D={loadMore:function(t){t.target.classList.contains("load-more-btn")&&j()},categoriesFilter:function(t){t.target.classList.value=="categories__btn"&&w(t.target.textContent,null)},searchProduct:function(t){t.preventDefault();const e=t.target.elements.searchValue.value;t.target.elements.searchValue.value="";const o=S.get();o!=="/"&&o!=="/index.html"&&(a.add("search","none",e),S.clear()),w(null,e)},searchClear:function(t){t.target.classList.value==="search-form__btn-clear"&&(r.searchForm.elements.searchValue.value="")},productCard:function(t){let e=t.target;if(e.classList.value!=="products"){for(;!e.classList.contains("products__item");)e=e.parentElement;k(e.dataset.id)}}},S={get:function(){return window.location.pathname},clear:function(){let t=window.location.href;window.location.href=t.substring(0,t.indexOf("/",t.indexOf("/")+2))}};export{a as L,q as a,W as b,B as c,w as d,v as e,J as f,A as g,D as h,r,N as u};
//# sourceMappingURL=handlers-_LevjUeK.js.map
